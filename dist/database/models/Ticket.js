const a34_0x21806b=a34_0x4d5e;(function(_0x306170,_0x54c5c3){const _0x47be0=a34_0x4d5e,_0xce3244=_0x306170();while(!![]){try{const _0x3729d4=parseInt(_0x47be0(0xff))/0x1*(parseInt(_0x47be0(0x103))/0x2)+-parseInt(_0x47be0(0xfa))/0x3*(-parseInt(_0x47be0(0x105))/0x4)+parseInt(_0x47be0(0xe9))/0x5*(parseInt(_0x47be0(0x101))/0x6)+parseInt(_0x47be0(0xf0))/0x7*(-parseInt(_0x47be0(0xf6))/0x8)+-parseInt(_0x47be0(0xec))/0x9+-parseInt(_0x47be0(0xef))/0xa*(parseInt(_0x47be0(0xf1))/0xb)+parseInt(_0x47be0(0xf5))/0xc*(parseInt(_0x47be0(0xfc))/0xd);if(_0x3729d4===_0x54c5c3)break;else _0xce3244['push'](_0xce3244['shift']());}catch(_0x973811){_0xce3244['push'](_0xce3244['shift']());}}}(a34_0x1103,0xce802));function a34_0x4d5e(_0x5598f3,_0x4ff964){const _0x110327=a34_0x1103();return a34_0x4d5e=function(_0x4d5eb5,_0x4189ca){_0x4d5eb5=_0x4d5eb5-0xe5;let _0x4b6b7d=_0x110327[_0x4d5eb5];return _0x4b6b7d;},a34_0x4d5e(_0x5598f3,_0x4ff964);}function a34_0x1103(){const _0x5870a8=['resolve','getStats','20069436kYWrZH','16PofVsf','STRING','category','closedAt','3AkHugV','CLOSED','13kuLnTi','init','Ticket','743VMkyAz','save','7218hHlebX','closedBy','4054bTcGxd','status','1959168HzJzCm','findAll','RESOLVED','OPEN','DATE','notIn','claimedBy','325QymlYs','IN_PROGRESS','forEach','1165752ZiFEKm','claim','close','10rvgJkT','5045565ICRqQu','14625127KRaxjC','count'];a34_0x1103=function(){return _0x5870a8;};return a34_0x1103();}import{Model,DataTypes,Op}from'sequelize';import{sequelize}from'../sqlite.js';import{TicketStatus}from'../../systems/tickets/TicketTypes.js';export class Ticket extends Model{async[a34_0x21806b(0xed)](_0x23d35d){const _0x3e0e5d=a34_0x21806b;this[_0x3e0e5d(0xe8)]=_0x23d35d,this[_0x3e0e5d(0x104)]=TicketStatus[_0x3e0e5d(0xea)],await this['save']();}async[a34_0x21806b(0xee)](_0xddd850){const _0x1100a3=a34_0x21806b;this[_0x1100a3(0x102)]=_0xddd850,this[_0x1100a3(0xf9)]=new Date(),this[_0x1100a3(0x104)]=TicketStatus[_0x1100a3(0xfb)],await this[_0x1100a3(0x100)]();}async[a34_0x21806b(0xf3)](_0xa9d8fb){const _0x2f54f6=a34_0x21806b;this['closedBy']=_0xa9d8fb,this[_0x2f54f6(0xf9)]=new Date(),this[_0x2f54f6(0x104)]=TicketStatus['RESOLVED'],await this[_0x2f54f6(0x100)]();}static async[a34_0x21806b(0xf4)](){const _0x53528c=a34_0x21806b,_0x1dc8a1=await this[_0x53528c(0xf2)](),_0x1ba439=await this[_0x53528c(0xf2)]({'where':{'status':{[Op[_0x53528c(0xe7)]]:[TicketStatus[_0x53528c(0xfb)],TicketStatus[_0x53528c(0x107)]]}}}),_0x353441=await this['count']({'where':{'status':{[Op['in']]:[TicketStatus[_0x53528c(0xfb)],TicketStatus[_0x53528c(0x107)]]}}});return{'total':_0x1dc8a1,'open':_0x1ba439,'closed':_0x353441};}static async['getActiveTickets'](){const _0x1bb2f8=a34_0x21806b,_0x4d62ad=await this[_0x1bb2f8(0x106)]({'where':{'status':{[Op[_0x1bb2f8(0xe7)]]:[TicketStatus[_0x1bb2f8(0xfb)],TicketStatus[_0x1bb2f8(0x107)]]}}}),_0xe31d1b={};return _0x4d62ad[_0x1bb2f8(0xeb)](_0x5c03a8=>{const _0x1b84b8=_0x1bb2f8;_0xe31d1b[_0x5c03a8[_0x1b84b8(0xf8)]]?_0xe31d1b[_0x5c03a8[_0x1b84b8(0xf8)]]++:_0xe31d1b[_0x5c03a8['category']]=0x1;}),_0xe31d1b;}}Ticket[a34_0x21806b(0xfd)]({'id':{'type':DataTypes['STRING'],'primaryKey':!![]},'userId':{'type':DataTypes[a34_0x21806b(0xf7)],'allowNull':![]},'channelId':{'type':DataTypes[a34_0x21806b(0xf7)],'allowNull':![]},'category':{'type':DataTypes[a34_0x21806b(0xf7)],'allowNull':![]},'status':{'type':DataTypes[a34_0x21806b(0xf7)],'allowNull':![],'defaultValue':TicketStatus[a34_0x21806b(0xe5)]},'claimedBy':{'type':DataTypes[a34_0x21806b(0xf7)],'allowNull':!![]},'closedBy':{'type':DataTypes[a34_0x21806b(0xf7)],'allowNull':!![]},'closedAt':{'type':DataTypes[a34_0x21806b(0xe6)],'allowNull':!![]},'createdAt':{'type':DataTypes[a34_0x21806b(0xe6)],'allowNull':![]},'updatedAt':{'type':DataTypes[a34_0x21806b(0xe6)],'allowNull':![]}},{'sequelize':sequelize,'modelName':a34_0x21806b(0xfe),'tableName':'tickets'});